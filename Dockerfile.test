FROM node:20-slim

RUN corepack enable && corepack prepare pnpm@latest --activate

WORKDIR /app

COPY package.json pnpm-lock.yaml ./

RUN pnpm install && pnpm exec playwright install --with-deps chromium firefox webkit

COPY . .

CMD ["pnpm", "test"]

